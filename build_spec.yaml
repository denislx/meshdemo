version: 0.1             
component: build
timeoutInSeconds: 5000
shell: bash
env:
  exportedVariables:
    - version
steps:
  - type: Command
    command: |
      # BUILD HOME v1 - STATIC
      echo "Home v1 version: ${home_v1_version}"
      cd ./home/
      cp ./html/pricing/index_static.html ./html/pricing/index.html
      docker build -t ams.ocir.io/frsxwtjslf35/meshdemo-homesvc:${home_v1_version} .
      docker push ams.ocir.io/frsxwtjslf35/meshdemo-homesvc:${home_v1_version}
  - type: Command
    command: |
      # BUILD HOME v2 - DYNAMIC 
      echo "Home v2 version: ${home_v2_version}"
      cd ./home/
      cp ./html/pricing/index_dynamic.html ./html/pricing/index.html
      docker build -t ams.ocir.io/frsxwtjslf35/meshdemo-homesvc:${home_v2_version} .
      docker push ams.ocir.io/frsxwtjslf35/meshdemo-homesvc:${home_v2_version}
  - type: Command
    command: |
      # BUILD PRICE v1 
      echo "Price v1 version: ${price_v1_version}"
      cd ./price/
      docker build -t ams.ocir.io/frsxwtjslf35/meshdemo-pricesvc:${price_v1_version} .
      docker push ams.ocir.io/frsxwtjslf35/meshdemo-pricesvc:${price_v1_version}